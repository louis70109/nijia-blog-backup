---
title:
  "[object Object]": null
categories: å­¸ç¿’ç´€éŒ„
tags:
---

![](https://i.imgur.com/0QAGPDc.png)

# å‰è¨€

<!-- more -->

# å¾è¼¸å…¥`https://www.google.com`ä¹‹å¾Œç™¼ç”Ÿäº†ä»€éº¼äº‹?

é¦–å…ˆé ˆäº†è§£`https://www.google.com`é€™æ¨£çš„ç¶²å€æ˜¯å¦‚ä½•çµ„æˆ:

1. https: é€šè¨Šå”å®šï¼Œå…¶ä»–å¸¸è¦‹å¦‚: tcpã€udpã€websocketã€mqtt...
2. www: å¸¸è½åˆ°çš„ sub domain å°±æŒ‡é€™å€‹éƒ¨åˆ†ï¼Œä¹Ÿæœƒè½åˆ° host çš„åç¨±ï¼Œæ„æŒ‡åœ¨ä¸€å€‹ Domain ä¸‹è‹¥æœ‰å¤šå€‹ä¸»æ©Ÿæ™‚å‰‡ç”¨é€™å€‹éƒ¨åˆ†ä¾†æŒ‡å®šåç¨±ç‚ºç‰¹å®šä¸»æ©Ÿï¼Œä¸€èˆ¬é è¨­é€²å…¥é»ç‚º `www`ã€‚
3. .google: é€™éƒ¨åˆ†å­¸åç‚º `Second Level Domain`(SLD)ï¼Œåœ¨ Top level domain æœå°‹å®Œå¾Œæ¥è‘—æœå°‹çš„å±¤ç´šï¼Œé€šå¸¸ç‚ºå€‹äººå“ç‰Œã€å…¬å¸è¡Œè™Ÿç‚ºåç¨±ã€‚
4. .com: é€™å±¤åç‚º `Top Level Domain`(TLD)ï¼Œå¸¸è¦‹ç‚º comã€orgã€govã€eduã€ioï¼Œè¼ƒå¥½ç†è§£çš„æ–¹å¼æˆ‘èªç‚ºå°±æ˜¯æŠŠç•¶å‰é€²å…¥é»åˆ¤æ–·ç‚ºä½•ç¨®`çµ„ç¹”`ï¼Œå†ä»¥æ­¤åˆ†é¡ä¸‹å»æ‰¾ SLDï¼Œæœ‰é»äºŒå…ƒæœå°‹çš„æ¦‚å¿µ ğŸ˜ã€‚
5. root: ä¸€é–‹å§‹æˆ‘çœ‹åˆ°é€™éƒ¨åˆ†ä¹Ÿè¦ºå¾—éœ§ç…ç…ï¼Œç°¡å–®ä¾†èªªæ¯å€‹åŸŸå(Domain)çš„çµå°¾éƒ½æœƒæœ‰ `.` é€™å€‹å°æ•¸é»ï¼Œå®ƒæ˜¯æŒ‡åŸŸå(Domain)çš„é€²å…¥é»ï¼Œæ‰€æœ‰ä¸Šçš„ Domain éƒ½æœƒå¾é€™å€‹åœ°æ–¹é–‹å§‹åˆ¤æ–·ã€‚

> ä¸Šè¿°æ˜¯ç…§è‘—ç¶²å€ç”±å·¦è€Œå³å¯«ï¼Œå¯¦éš›ä¸Šå‰‡æ˜¯å¾å³å¾€å·¦åˆ¤æ–·

ä¸Šé¢æ­¥é©Ÿå·²ç¶“èªªæ˜æ¸…æ¥šæ¯å€‹éƒ¨åˆ†äº†ï¼Œæ¥ä¸‹ä¾†å°±èªªæ˜å¾ç€è¦½å™¨è¼¸å…¥ç¶²å€å¾Œçš„æ­¥é©Ÿå§ï¼

## å‘ DNS è¦ IP

![](https://i.imgur.com/8IUwjtr.png)

> åƒè€ƒ[å…­è§’å­¸é™¢](https://w3c.hexschool.com/blog/8d691e4f)

DNS å…¨åç‚º Domain Name Serverï¼Œä¸»è¦è·è²¬æ˜¯å¹«å¿™æŠŠ ç¶²åŸŸåç¨±(Domain Name) è½‰æˆ IPï¼Œå› ç‚ºç¶²åŸŸåç¨±æ˜¯äººæ‰çœ‹å¾—æ‡‚è€Œæ©Ÿå™¨åªèªå¾— IPï¼Œå› æ­¤éœ€è¦ DNS ä¾†å¹«å¿™è½‰è­¯ã€‚

### Name Server

è—‰ç”±ä¸Šåœ–æœ€çµ‚ DNS æœƒæ”¶åˆ°æ¯å€‹å–®ç¨çš„ Name Server å›å‚³å¾Œçš„å€¼ä¸¦çµ„æˆ IP å›å‚³çµ¦ç€è¦½å™¨ã€‚

## è·Ÿ IP è«‹æ±‚è³‡æº

å¾…ç€è¦½å™¨æ”¶åˆ° IP å¾Œå»è«‹æ±‚è³‡æºï¼Œè€Œ IP (è³‡æºæ–¹)é‚£ä¸€èˆ¬ä¾†èªªéƒ½æœƒæœ‰å€‹ Web Server æ“‹åœ¨å‰é¢(Nginxã€Apache)ï¼Œè‹¥æ˜¯æœ‰å‰ç«¯é é¢å‰‡æ˜¯è®“ç€è¦½å™¨ä¸‹è¼‰éœæ…‹æª”æ¡ˆ(static)ï¼Œè€Œè‹¥åªæ˜¯å–®ç´”å°å‘è‡³ API çš„è©±å°±ç›´æ¥å›å‚³å®šç¾©çš„è³‡æ–™æ ¼å¼(JSONã€XML...)ã€‚

## å¿«å–

æ­¤æ™‚ç€è¦½å™¨ä¸‹è¼‰å®Œå¾Œå‰‡æœƒå­˜åˆ°å¿«å–(Cache)è£¡ï¼ŒåŠ é€Ÿä¸‹æ¬¡è¼‰å…¥ã€‚

## æ¸²æŸ“

![https://i.imgur.com/ddrEQxs.png](https://i.imgur.com/ddrEQxs.png)

> åƒè€ƒ[å…­è§’å­¸é™¢](https://w3c.hexschool.com/blog/8d691e4f)

é€™é‚Šå°±ç°¡å–®æ•˜è¿°ä¸€ä¸‹å‰ç«¯æ¸²æŸ“ç™¼ç”Ÿçš„ç¶“éï¼ŒHTML æœƒç”¢ç”Ÿå‡ºä¸€å€‹ `DOM Tree`ï¼ŒCSS æœƒæœ‰ä¸€å€‹ `CSSOM Tree`ï¼Œåœ¨å„åˆ¥ç”¢ç”Ÿå®Œå¾Œæœƒåˆä½µæˆä¸€å€‹ `render Tree`ï¼Œæœ€å¾Œç¶“ç”± `layout` çš„æ­¥é©Ÿè®“ç€è¦½å™¨å°‡ Tree æ¸²æŸ“è‡³ç•«é¢ä¸Šï¼Œå®Œæˆç•«é¢é¡¯ç¤ºçš„æ­¥é©Ÿã€‚

- ä¸Šè¿°çš„ DOM å°±æ˜¯å¯« jQuery æ™‚å‘¼å«çš„é‚£å€‹ DOM å…ƒç´ 

ä»¥ä¸Šå°±æ˜¯ç•¶ä½ è¼¸å…¥ä¸€å€‹ç¶²å€å¾Œæœƒé‡åˆ°çš„äº‹æƒ…ç¶“éï½

# è¼¸å…¥ç¶²å€å¾Œï¼Œä½ æ€èƒ½ä¸çŸ¥é“ HTTP å‘¢ï¼Ÿ

## æº–å‚™é€£ç·š - ä¸‰æ–¹äº¤æ¡ (Three-Way Handshake)

![](https://i.imgur.com/9pRGWnc.png)

é€™é‚Šæˆ‘ç”¨æœ€ç°¡å–®çš„è¡¨ç¤ºï¼Œ`SYN`åœ¨ä¸‰æ–¹äº¤æ¡æœƒæ˜¯ä¸€å€‹å¸¶æœ‰åºåˆ—è™Ÿ(n)çš„è«‹æ±‚ï¼Œè€Œ`ACK`å‰‡æ˜¯ä»£è¡¨å›æ‡‰å°æ–¹æˆ‘å€‘é€™é‚Šæ”¶åˆ°çš„è¨Šè™Ÿï¼Œæœƒå¸¶æœ‰ n+1 çš„æ•¸å­—å›å‚³ã€‚

åœ¨ä¸‰æ–¹äº¤æ¡ä¸­ï¼Œæœƒå…ˆç”± Client å‘Šè¨´ Server ç¾åœ¨å®ƒè¦é€£ç·šä¸¦çµ¦ä¸€å€‹æ•¸å­—ï¼Œå›å‚³æ™‚æœƒé€ n+1 çš„åŸå› æ˜¯é¿å…åœ¨è«‹æ±‚çš„éç¨‹ä¸­å› å„ç¨®å› ç´ å°è‡´å›ä¾†çš„å€¼éŒ¯èª¤æ™‚çš„ä¸€å€‹é˜²ç¯„æ©Ÿåˆ¶ï¼Œç”¨ `+1` é€™å€‹åšæ³•ä¾†ç¢ºä¿å°æ–¹çµ¦çš„å›å‚³å€¼æ˜¯æˆ‘å‰›å‰›é€å‡ºå»çš„å€¼ +1ï¼Œé¿å…é€£ç·šéç¨‹ä¸­æ··äº‚ã€‚

ç°¡å–®çš„è¨˜æ³•å°±æ˜¯å¾ Client å…ˆé€ä¸€å€‹æ•¸å­— N çµ¦ Serverï¼Œè€Œå›å‚³æ™‚ä¸€å®šæ˜¯çµ¦ N+1 ä¸¦ä¸”å¸¶è‘—ä¸€å€‹ Mï¼ŒClient æ”¶åˆ°å¾Œç¢ºèªå®Œå‰‡åœ¨å›å‚³ M+1 è®“ Server ä¹Ÿç¢ºå®š CLient æ”¶åˆ°äº†ï¼Œå®Œæˆä¸‰æ¬¡é€£ç·šã€‚

### Bonus - ç‚ºä»€éº¼ä¸å…©æ¬¡ç²å››æ¬¡äº¤æ¡å‘¢ï¼Ÿ

ç¶“éä¸Šè¿°çš„æµç¨‹ï¼Œä¸€å®šæ˜¯ä¸€å€‹ç™¼(SYN)ï¼Œä¸€å€‹æ”¶å®Œå¾Œå‘Šè¨´å°æ–¹å®ƒæ”¶åˆ°(ACK)ï¼Œé‚£

## æ–·é–‹é€£ç·š - å››æ¬¡æ®æ‰‹

# SSL

# OAuth

è®“å®¢æˆ¶ç«¯èƒ½ä»¥ OAuth é–‹æ”¾æ¨™æº–åœ¨ç¬¬ä¸‰æ–¹æ‡‰ç”¨ç¨‹å¼ä¸Šé€éæˆæ¬Š(Authorization)çš„æ–¹å¼å–å¾—åœ¨æœå‹™æä¾›å•†(LINEã€Facebookã€Google...)çš„è³‡æ–™(æª”æ¡ˆã€ç…§ç‰‡ã€å½±ç‰‡...)ã€‚

## å››ç¨®è§’è‰²

- Resource Owner(ç°¡ç¨± RO)ï¼šå¯ä»¥æˆæ¬Šæ–¼`çµ‚ç«¯ç”¨æˆ¶`å­˜å–å—ä¿è­·ä¹‹è³‡æ–™ã€‚
- Resource Server(ç°¡ç¨± RS)ï¼šå­˜å–å—ä¿è­·è³‡æ–™çš„åœ°æ–¹ï¼Œæ ¹æ“š Access Token ä¹‹æ¬Šé™è™•ç†è«‹æ±‚ã€‚
- Clientï¼šä»£è¡¨ä½¿ç”¨è€…å»å­˜å–å—ä¿è­·è³‡æ–™çš„æ‡‰ç”¨ç¨‹å¼ã€‚Client æŒ‡ä»»ä½•åœ¨ Server ç«¯ã€æ¡Œé¢æˆ–è¨­å‚™ä¸ŠåŸ·è¡Œçš„æ‡‰ç”¨ç¨‹å¼ã€‚
- Authorization Server(ç°¡ç¨± AS)ï¼šè·è²¬ç‚ºèªè­‰éä½¿ç”¨è€…çš„èº«ä»½ï¼Œä¸”ç¶“ç”±ä½¿ç”¨è€…è¨±å¯å¾Œï¼Œå°±æœƒç°½ç™¼ Access Token çš„åœ°æ–¹ã€‚

# æµç¨‹

ä»¥ä¸‹ç‚ºä¸€å€‹ OAuth çš„æµç¨‹:

```
+--------+                               +---------------+
|        |--(1)- Authorization Request ->|   Resource    |
|        |                               |     Owner     |
|        |<-(2)-- Authorization Grant ---|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(3)-- Authorization Grant -->| Authorization |
| Client |                               |     Server    |
|        |<-(4)----- Access Token -------|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(5)----- Access Token ------>|    Resource   |
|        |                               |     Server    |
|        |<-(6)--- Protected Resource ---|               |
+--------+                               +---------------+
```

ä»¥ä¸‹æœƒåˆ†åˆ¥ç”¨å››å€‹è§’è‰²ä»£æ›¿ä»–å€‘ï¼š
Client = A å“¡å·¥ã€RO = å¤§æ¨“è­¦è¡›ã€AS = å…¬å¸æ«ƒæª¯ã€RS = å€‰åº«

ä¸¦ç”¨å°æ•…äº‹èªªæ˜ï¼Œæƒ…å¢ƒæ˜¯å“¡å·¥å‡æ—¥éœ€è¿”å›å…¬å¸å€‰åº«æ‹¿å–é›¶ä»¶ï¼Œä½†æ˜¯å»æ²’å¸¶å…¬å¸çš„è­‰ä»¶ï¼Œè€Œå…¬å¸æ˜¯åœ¨å•†æ¥­è¾¦å…¬å®¤ä¸­ï¼Œå¤§æ¨“è­¦è¡›èªä¸å¾—é€™éº¼å¤šé–“å…¬å¸çš„äººï¼Œå› æ­¤éœ€è¦æŒ‰ç…§åŸºæœ¬æµç¨‹æ‰èƒ½é€²å…¬å¸æ‹¿å–è³‡æ–™ï¼ŒA å“¡å·¥æŠµé”å•†è¾¦å¤§æ¨“å¾Œï¼š

1. A å“¡å·¥æ‹¿è­‰ä»¶å‡ºä¾†ä¸¦å¡«å¯«åŸºæœ¬è³‡æ–™çš„å–®å­çµ¦è­¦è¡› (ç™¼é€è«‹æ±‚)
2. è­¦è¡›ç¢ºèªå®Œå¾Œæ‹¿äº†ä¸€å€‹æš«æ™‚æ€§çš„é‘°åŒ™(`code`)çµ¦ A å“¡å·¥
3. A å“¡å·¥æ‹¿è‘—æš«æ™‚æ€§é‘°åŒ™(`code`)è·Ÿå…¬å¸æ«ƒæª¯
4. æ«ƒæª¯å°‡è‡¨æ™‚é‘°åŒ™(`code`)æ›æˆå…¬å¸çš„é–€ç¦å¡(Access Token)
5. A å“¡å·¥å»å€‰åº«ä½¿ç”¨é–€ç¦å¡(Access Token)é–‹å€‰åº«é–€
6. å€‰åº«é–€æ‰“é–‹å¾Œ A å“¡å·¥å¾è£¡é¢æ‹¿å–è‡ªå·±éœ€è¦çš„é›¶ä»¶(Protected Resource)

> é€éé€™æ¨£çš„è§£é‡‹æ‡‰è©²æ¯”è¼ƒå¥½æ‡‚å§ â“

# OpenID

# çµè«–
